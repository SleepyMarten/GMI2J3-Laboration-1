!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).fusetag=t()}(this,function(){"use strict";var e={fuse_breakpoints:{m:1024,s:768,xs:0},fuse_domain:["tutsplus.com"],fuse_settings:{adblock:!0,lazy:!1,responsive:!0,headerbidding:!1,refresh:!1},fuse_blocked_url:[],fuse_id:1007,fuse_slots:[{id:"21725633260",slot:"/71161633/ENV_envato/article_hrec_1",sizes:[[970,250],[970,90],[728,90]],sizeMapping:{m:[[970,250],[970,90],[728,90]],s:[],xs:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21725633266",slot:"/71161633/ENV_envato/article_hrec_2",sizes:[[970,250],[970,90],[728,90]],sizeMapping:{m:[[970,250],[970,90],[728,90]],s:[],xs:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21725474727",slot:"/71161633/ENV_envato/article_vrec_1",sizes:[[300,600],[160,600],[300,250]],sizeMapping:{m:[[300,600],[160,600],[300,250]],s:[],xs:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355504",slot:"/71161633/ENV_envato/tutorial_top",sizes:[[970,250],[728,90],[970,90],[320,100],[320,50]],sizeMapping:{m:[[728,90],[970,250],[970,90]],s:[[728,90]],xs:[[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355507",slot:"/71161633/ENV_envato/tutorial_rhs_1",sizes:[[300,600],[160,600],[300,250],[320,100],[320,50]],sizeMapping:{m:[[160,600],[300,250],[300,600]],s:[[160,600]],xs:[[300,250],[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764354922",slot:"/71161633/ENV_envato/tutorial_rhs_2",sizes:[[300,600],[160,600],[300,250],[320,100],[320,50]],sizeMapping:{m:[[160,600],[300,250],[300,600]],s:[[160,600]],xs:[[300,250],[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355510",slot:"/71161633/ENV_envato/tutorial_bottom",sizes:[[970,250],[728,90],[970,90],[300,250],[320,100],[320,50]],sizeMapping:{m:[[728,90],[970,250],[970,90]],s:[[728,90]],xs:[[300,250],[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764347423",slot:"/71161633/ENV_envato/mob_tutorial_1",sizes:[[320,100],[320,50]],sizeMapping:{xs:[[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355513",slot:"/71161633/ENV_envato/mob_tutorial_2",sizes:[[300,250],[320,100],[320,50]],sizeMapping:{xs:[[300,250],[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355516",slot:"/71161633/ENV_envato/mob_tutorial_3",sizes:[[300,250],[320,100],[320,50]],sizeMapping:{xs:[[300,250],[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764354925",slot:"/71161633/ENV_envato/mob_tutorial_4",sizes:[[300,250],[320,100],[320,50]],sizeMapping:{xs:[[300,250],[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355519",slot:"/71161633/ENV_envato/article_top",sizes:[[970,250],[728,90],[970,90]],sizeMapping:{m:[[728,90],[970,250],[970,90]],s:[[728,90]],xs:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355522",slot:"/71161633/ENV_envato/article_rhs_1",sizes:[[300,600],[160,600],[300,250],[320,100],[320,50]],sizeMapping:{m:[[160,600],[300,250],[300,600]],s:[[160,600]],xs:[[300,250],[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355525",slot:"/71161633/ENV_envato/article_rhs_2",sizes:[[300,600],[160,600],[300,250],[320,100],[320,50]],sizeMapping:{m:[[160,600],[300,250],[300,600]],s:[[160,600]],xs:[[300,250],[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1,refresh:20},bids:[]},{id:"21764347426",slot:"/71161633/ENV_envato/article_mid_1",sizes:[[300,250],["fluid"],[320,100],[320,50]],sizeMapping:{m:[[300,250],"fluid"],s:[[300,250],"fluid"],xs:[[300,250],[320,100],[320,50],"fluid"]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764354928",slot:"/71161633/ENV_envato/article_mid_2",sizes:[[300,250],["fluid"],[320,100],[320,50]],sizeMapping:{m:[[300,250],"fluid"],s:[[300,250],"fluid"],xs:[[300,250],[320,100],[320,50],"fluid"]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355528",slot:"/71161633/ENV_envato/article_rhs_3",sizes:[[300,600],[160,600],[300,250],[320,100],[320,50]],sizeMapping:{m:[[160,600],[300,250],[300,600]],s:[[160,600]],xs:[[300,250],[320,100],[320,50]]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355531",slot:"/71161633/ENV_envato/article_bottom",sizes:[[970,250],[728,90],[970,90]],sizeMapping:{m:[[728,90],[970,250],[970,90]],s:[[728,90]],xs:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355534",slot:"/71161633/ENV_envato/mob_article_1",sizes:[[320,100],[320,50]],sizeMapping:{xs:[[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355537",slot:"/71161633/ENV_envato/mob_article_2",sizes:[[320,100],[300,250],[320,50]],sizeMapping:{xs:[[300,250],[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764354931",slot:"/71161633/ENV_envato/mob_article_3",sizes:[[300,250],[320,100],[320,50]],sizeMapping:{xs:[[300,250],[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]},{id:"21764355540",slot:"/71161633/ENV_envato/mob_article_4",sizes:[[300,250],[320,100],[320,50]],sizeMapping:{xs:[[300,250],[320,100],[320,50]],m:[],s:[]},attributes:{lazy:!1,adblock:!1},bids:[]}],supported_sizes:{m:[[970,250],[970,90],[728,90],[300,600],[160,600],[300,250],"fluid"],s:[[728,90],[160,600],[300,250],"fluid"],xs:[[320,100],[320,50],[300,250],"fluid"]},prebid_analytics:[],fuse_industry:"IAB19"},t="2",n="2.6.0",c=e,i="div",s="fuse-slot",o="FUSE",a={name:"Google Publisher Tag",url:"//www.googletagservices.com/tag/js/",file:"gpt.js"},r={name:"Prebid.org",url:"//cdn.publift.com/fuse/tag/",file:"prebid.js"},u={name:"Criteo AdBlock",url:"//static.criteo.net/js/ld/",file:"publishertag.js"};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)});var d="undefined"!=typeof module&&module.exports?"node":"browser",l="undefined"==typeof window?global:window,f=l,b=l.document;function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,s=!1,o=void 0;try{for(var a,r=e[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p,m,h=function(t){return g(f.top.location.search.split(/[?&]/).filter(function(e){return""!==e}).map(function(e){return e.split("=")}).filter(function(e){return e[0]===t}),1)[0]||[]},y=function(){return(new Date).getTime()},v=function(e,t){if(e.hasOwnProperty("url")){var n=b.createElement("script");n.async=!0,n.type="text/javascript","function"==typeof t&&(n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()});b.location.protocol;n.src=e.url+e.file;var i=b.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}},z=f.console,S="node"===d||"true"===h("fuse_debug")[1]||!1,_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]="[".concat(o,"]-").concat(t[0]),"node"===d)throw new Error(t);z&&z.error&&S&&z.error.apply(null,t)},k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0]="[".concat(o,"]-").concat(t[0]),z&&z.warn&&S&&z.warn.apply(null,t)},E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0]="[".concat(o,"]-").concat(t[0]),z&&z.log&&S&&z.log.apply(null,t)},T=function(e){var n,i,s,o,a,r,c,u,t;f.addEventListener("resize",(n=e||function(){E("resized",f.innerWidth,f.innerHeight)},i=500,t=function e(){var t=y()-c;t<i&&0<=t?o=setTimeout(e,i-t):(o=null,s||(u=n.apply(r,a),o||(r=a=null)))},function(){r=this,a=arguments,c=y();var e=s&&!o;return o||(o=setTimeout(t,i)),e&&(u=n.apply(r,a),r=a=null),u}))},A=function(e){var n,i=c.fuse_breakpoints,s=e||f.innerWidth;return Object.keys(i).forEach(function(e){var t=i[e];t<s&&(!n||s<n)&&(n={size:t,name:e})}),n},D={watchForBreakpoints:function(t){var n=f.innerWidth,i=A(n).size;T(function(){n=f.innerWidth;var e=A(n).size;return e!==i?(E("Window resized to %spx which crossed a breakpoint: New breakpoint is %spx",n,i=e),t(!0)):t(!1)})},setResizeListener:T,getCurrentBreakpoint:A},w=JSON.parse(JSON.stringify(c.fuse_slots)),F=function(){return"node"===d?100:f.performance.timing.navigationStart},O=function(){return w},j=function(e,t,n){var i=e.getBoundingClientRect(),s=t?100/t:1,o=N(n),a=b.hidden,r=i.top<0?i.top>=-1*i.height/s:0<=i.top,c=0<=i.left,u=i.bottom-(n||0===n?i.height+o:i.height/s)<=(f.innerHeight||b.documentElement.clientHeight),d=i.right<=(f.innerWidth||b.documentElement.clientWidth);return!!(!a&&r&&c&&u&&d)},N=function(e){return!0===e?0:e},I=function(e,t){var n=t.name;return e.hasOwnProperty("customLazy")&&e.customLazy.hasOwnProperty(n)&&!1!==e.customLazy[n]?e.customLazy[n]:e.attributes.lazy},M=function(e){if(!e)return _("missing parameter fuseSlot");e.matched=e.matched||0,e.matched+=1},C=function(t){return t?"string"!=typeof t?_("fuseSlotId should be of type string"):g(w.filter(function(e){return e.id===t}),1)[0]||!1:_("missing parameter fuseSlotID")},P={getMatchedFuseSlot:C,clearFuseSkins:function(){b.querySelectorAll("div.fuse-custom-skin").forEach(function(e){e.parentNode.removeChild(e)})},getFuseDob:F,getTime:function(){return p},setNewTime:function(e){return p=e},getFuseQueue:function(){return f.fusetag.que||[]},matchNodeToFuseSlotObject:function(e){if(!e)return _("missing parameter fuseSlotNode");var t=e.getAttribute("data-fuse"),n=C(t);return n||k("[SLOTS]: There is no FuseSlot set up in the account matching the id ".concat(t)),n&&M(n),n},incrementMatchedFuseSlot:M,getFuseUnits:function(){return b.querySelectorAll("".concat(i,"[data-fuse]"))},getFuseSlots:O,getFuseUnitById:function(e){var t=b.querySelectorAll("".concat(i,'[data-fuse="').concat(e,'"]'));return t[t.length-1]},getFuseUnitByCode:function(e){var t=b.querySelectorAll("".concat(i,'[data-fuse-code="').concat(e,'"]'));return 1<t.length&&k("There should be only one div with the data-fuse-code of ".concat(e)),t[0]},buildFuseSlot:function(e,t){if(E("[SLOTS]: Building the fuse slot for ".concat(e.code," "),new Date-F()),t.setAttribute("data-fuse-code","".concat(e.code)),t.setAttribute("data-fuse-slot","".concat(e.slot)),!t.hasChildNodes()){var n=b.createElement("div");n.setAttribute("id","".concat(e.code)),n.className=s,t.appendChild(n)}return t},resetFuseSlots:function(){return w=JSON.parse(JSON.stringify(c.fuse_slots))},checkInView:j,getCurrentSizeMapSizes:function(t){var e=D.getCurrentBreakpoint().name,n=g(O().filter(function(e){return e.id===t})||[],1)[0];return n.sizeMapping&&n.sizeMapping[e]?(Array.isArray(n.sizeMapping[e])?n.sizeMapping[e]:[n.sizeMapping[e]]).filter(function(e){return"fluid"!==e}):(k('Fuse slot "'.concat(t,'" does not have sizemaps configured, sizeless prebid units may act strangely.')),n.sizes)},lazyAttribute:N,lazyDeviceToggle:I,checkLazyFalsy:function(e,t,n){return!!t.attributes.hasOwnProperty("lazy")&&!1!==t.attributes.lazy&&!j(e,50,I(t,n))}},B=a,x=function(){var e=f.top.location.host;return e.substring(e.length-40,e.length)},L=function(){var e=f.top.location.pathname;return e.substring(e.length-40,e.length)},V=function(){var e=f.top.location.search;return e.substring(e.length-40,e.length)},q=function(){for(var e=[],t=f.top.location.pathname.split("/"),n=0;n<t.length;n+=1)t[n].length&&-1===t[n].indexOf(".")&&e.push(t[n]);return e},U=function(e){if(m&&m.cmd)return m.cmd.push(e);E("googletag or googletag.cmd not exists")},R=function(t){if(m&&t)return m.pubads().getSlots().filter(function(e){return e.getSlotElementId()===t})},H=function(e,t){U(function(){m.pubads().setTargeting(e,t)})},J=function(){var t,n,i;H("fuse_profanity",(t=f.top.location.host,n=f.top.location.pathname,i="false",c.fuse_blocked_url&&c.fuse_blocked_url.forEach(function(e){-1<e.indexOf(t+n)&&(i="true")}),i)),H("fuse_site",x()),H("fuse_path",L()),H("fuse_query",V()),H("fuse_category",q()),H("fuse_industry",c.fuse_industry)},Q=J,W=function(e){return v(B,function(){E("[LOAD]: 3. GPT ".concat(f.googletag&&f.googletag._loadStarted_?"v".concat(m.getVersion()," is loaded and ready"):"not loaded")),E("[TIME]: time in ms it took GPT to load",new Date-P.getFuseDob())})},G=function(e){var t,n,i,s,o,a=m.defineSlot(e.slot,e.sizes,e.code),r=Math.ceil(100*Math.random());a&&(a=function(e,n){if(n.sizeMapping&&0!==Object.keys(n.sizeMapping).length){var i=m.sizeMapping();Object.keys(n.sizeMapping).forEach(function(e){var t=c.fuse_breakpoints[e];i.addSize([t,0],n.sizeMapping[e])}),e.defineSizeMapping(i.build())}return e}(a,e),s=a,(o=e).targeting&&0!==Object.keys(o.targeting).length&&Object.keys(o.targeting).forEach(function(e){s.setTargeting(e,o.targeting[e])}),n=a=s,(i=e).attributes&&0!==Object.keys(i.attributes).length&&Object.keys(i.attributes).forEach(function(e){n.set(e,i.attributes[e])}),a=n,t=10<r?"optimized":r%10==0?"benchmark":"exploration".concat(r%10),!1!==c.fuse_settings.adomik&&a.setTargeting("publift_mv_testing",t),a.addService(m.pubads()));return a},Y=function(){return m=f.googletag||(f.googletag={cmd:[]})},Z=H,K=U,X=function(e){var t;if(m)return t=!e&&0<m.pubads().getSlots().length?m.pubads().getSlots()[m.pubads().getSlots().length-1].getSlotElementId():e?e.code:null,E("[BIDS]: Initialising DFP call at",new Date-(P.getTime()||P.getFuseDob())),m.display(t)},$=function(e){var t=e?R(e):null;return E("[BIDS]: Making DFP call for ".concat(e||"all units")),m.pubads().refresh(t)},ee=R,te=function(){m.pubads().disableInitialLoad(),m.pubads().collapseEmptyDivs(!0),m.pubads().setCentering(!0),m.pubads().enableSingleRequest(),J()},ne=function(t){m.pubads().addEventListener("slotRenderEnded",function(e){E("[BIDS]: Adserver responded ".concat(e.isEmpty?"without":"with"," creative for ").concat(e.slot.getSlotElementId())),E("[TIME]: time in ms it took for adserver to respond",new Date-(P.getTime()||P.getFuseDob())),t({hasCreative:!e.isEmpty,slotId:e.slot.getSlotElementId()})})},ie=function(){m.pubads().addEventListener("impressionViewable",function(e){E("[EVENT]: AD_IMPRESSION_VIEW for ".concat(e.slot.getSlotElementId()),new Date-(P.getTime()||P.getFuseDob()))})},se=function(){f.googletag.enableServices()},oe=r,ae=function(){return f.pbjs=f.pbjs||(f.pbjs={que:[]})},re=function(e){f.pbjs&&f.pbjs.que&&f.pbjs.que.push(e)},ce={setConsentManagement:function(e){"function"==typeof f.__cmp&&(e.consentManagement={cmpApi:"iab",timeout:8e3,allowAuctionWithoutConsent:!0},E("[CONSENT]: window.__cmp function found, prebid consent management module in place"))},setPriceGranularity:function(e){e.priceGranularity={buckets:[{min:0,max:2.99,increment:.01,precision:2},{min:3,max:9.9,increment:.1,precision:2},{min:10,max:49,increment:1,precision:2},{min:50,max:100,increment:10,precision:2}]}},setEnableSendAllBids:function(e){e.enableSendAllBids=!1},setSizeConfig:function(t,n){if(n&&n.fuse_settings&&n.fuse_settings.responsive){var i=null;t.sizeConfig=[],Object.keys(n.fuse_breakpoints).forEach(function(e){t.sizeConfig.push({mediaQuery:"(min-width:"+n.fuse_breakpoints[e]+"px)"+(i?" and (max-width: "+(i-1)+"px)":""),sizesSupported:n.supported_sizes[e],labels:[e]}),i=n.fuse_breakpoints[e]})}}},ue=function(e){e.prebid_analytics&&e.prebid_analytics.length&&e.prebid_analytics.forEach(function(e,t){0!==t&&k("\n          [ANALYTICS]: Having more than one analytics provider active may affect page performance.\n        "),f.pbjs.enableAnalytics(e),E("[ANALYTICS]: Analytics enabled for ".concat(e.provider))})},de=function(){var e={};return ce.setPriceGranularity(e),ce.setEnableSendAllBids(e),ce.setConsentManagement(e),ce.setSizeConfig(e,c),E("[BIDS]: Setting Prebid Config"),f.pbjs.setConfig(e),ue(c),e},le=function(e){E("[BIDS]: Setting Prebid ad units ".concat(e.code)),f.pbjs.addAdUnits(e)},fe=function(e){E("[BIDS]: Requesting bids"),f.pbjs.requestBids({bidsBackHandler:e})},be="node"===d?{prebidConfigSetters:ce,setPrebidConfig:de,createPrebidObj:ae,pushToPrebidQue:re,setPrebidAdUnits:le,requestPrebidBids:fe,setPrebidAnalytics:ue}:{loadPrebidLibrary:function(){return"true"===h("local_prebid")[1]?(k("[LOAD]: local version of prebid in use"),oe.url="./"):oe.url+="".concat(t,"/").concat(c.fuse_id,"/"),v(oe,function(){E("[LOAD]: 3. Prebid ".concat(f.pbjs&&f.pbjs.libLoaded?"".concat(f.pbjs.version," is loaded and ready"):"not loaded")),E("[TIME]: time in ms it took Prebid to load",new Date-P.getFuseDob())})},createPrebidObj:ae,pushToPrebidQue:re,setPrebidConfig:de,setPrebidAdUnits:le,requestPrebidBids:fe,sendPrebidAdserverRequest:function(e){!f.pbjs||f.pbjs&&f.pbjs.adserverRequestSent||(f.pbjs.adserverRequestSent=!0,E("[BIDS]: Setting adserver request from ".concat(e)),K(function(){re(function(){f.pbjs.setTargetingForGPTAsync();var t=f.pbjs.getAdserverTargeting();0!==Object.keys(t).length&&Object.keys(t).forEach(function(e){E("[BIDS]: Winning bid for slot ".concat(e," of ").concat(t[e].hb_pb," returned before timeout"))}),$()})}))}},ge={capture:!0,passive:!0},pe=function(n,i,s){f.addEventListener("scroll",function e(){var t=D.getCurrentBreakpoint();P.checkInView(n,null,P.lazyDeviceToggle(i,t))&&(P.lazyDeviceToggle(i,t)||0===P.lazyDeviceToggle(i,t))&&(s(),f.removeEventListener("scroll",e,ge))},ge)},me=u,he={loadAdBlocklLibrary:function(){return v(me,function(){E("[LOAD]: 3. Adblock script loaded."),E("[TIME]: time in ms to load Adblock script",new Date-P.getFuseDob())})},createAdBlockObj:function(){return f.Criteo||(f.Criteo={events:[]})},buildAdBlockSlots:function(e,t){var n,i;if(!(0<t.querySelectorAll('[id^="crt"]').length)&&e.attributes&&e.attributes.adblock){var s=b.createElement("DIV"),o=e.sizes&&0<e.sizes.length?"".concat(e.sizes[0][1],"px"):"100%",a={zoneid:Number(e.attributes.adblock),containerid:"crt-".concat(e.code),overrideZoneFloor:!1,height:o,callbacksuccess:function(e){E("[SLOTS]: Adblock slots ".concat(a.containerid," loaded")),E("[TIME]: time in ms it took Adblock Slot ".concat(a.containerid," to load"),new Date-P.getFuseDob()),e.target.parentNode.style.display="block"}};s.id=a.containerid,s.className="fuse-adblock",t.appendChild(s),n=a,f.Criteo?(i=n,f.Criteo.events.push(function(){E("[SLOTS]: Adblock slots ".concat(i.containerid," set up")),f.Criteo.DisplayAcceptableAdIfAdblocked(i),b.getElementById(i.containerid).style.height=i.height,b.getElementById(i.containerid).style.display="none"})):k("You need to declare the global Criteo Object first")}}},ye=e,ve=ye.fuse_settings;ve.pageTargeting=[];var ze=f.fusetag||(f.fusetag={que:[]}),Se={},_e={},ke={},Ee=(f.top.location.host,function(){return _e});ze.loaded&&k("[LOAD]: Fuse Tag was loaded more than once."),E("[LOAD]: 1. Fuse Tag v".concat(n," is loaded and ready")),E("[TIME]: time in ms it took Fuse to load",new Date-P.getFuseDob()),Y(),W(),be&&0<ve.headerbidding&&(be.createPrebidObj(),be.loadPrebidLibrary(),be.pushToPrebidQue(function(){be.setPrebidConfig()}),K(function(){f.googletag.pubads().disableInitialLoad()}),E("[LOAD]: 2. Headerbidding enabled, settings and ".concat(ve.headerbidding,"ms timeout added"))),0<ve.adblock&&(he.createAdBlockObj(),he.loadAdBlocklLibrary(),E("[LOAD]: 2. Adblock has been enabled.")),K(function(){te(),ne(function(e){_e[e.slotId]?_e[e.slotId].hasCreative=e.hasCreative:E("[BIDS]: Slot Render Ended Event fired for non fuse units.")}),ie(_e),se()});var Te=function(){Object.keys(ke).forEach(function(e){return clearInterval(ke[e])}),ke={}},Ae=function(){be&&0<ve.headerbidding?be.pushToPrebidQue(function(){f.pbjs&&f.pbjs.adUnits&&(f.pbjs.adUnits=f.pbjs.adUnits.map(function(e){var t=_e[e.code];if(!t)return e;var n=P.getCurrentSizeMapSizes(t.id);return e.sizes=n,e.mediaTypes&&e.mediaTypes.banner&&(e.mediaTypes.banner.sizes=n),e})),f.pbjs.requestBids({timeout:ve.headerbidding,bidsBackHandler:function(e){E("[BIDS]: Prebid bid response for all",e),E("[TIME]: time it took for Prebid bids to return",new Date-(P.getTime()||P.getFuseDob())),f.pbjs.setTargetingForGPTAsync(),P.clearFuseSkins(),$()}})}):K(function(){X(),P.clearFuseSkins(),$()})},De=function(i){i&&(E("[REFRESH]: Refreshing ".concat(i," at: "),new Date-(P.getTime()||P.getFuseDob())),be&&0<ve.headerbidding?be.pushToPrebidQue(function(){if(f.pbjs&&f.pbjs.adUnits){var e=f.pbjs.adUnits[i];if(e){var t=_e[i];if(!t)return;var n=P.getCurrentSizeMapSizes(t.id);e.sizes=n,e.mediaTypes&&e.mediaTypes.banner&&(e.mediaTypes.banner.sizes=n),f.pbjs.adUnits[i]=e}}f.pbjs.requestBids({timeout:ve.headerbidding,adUnitCodes:[i],bidsBackHandler:function(e){var t;E("[BIDS]: Prebid bid response for ".concat(t=i),e),E("[TIME]: time it took for Prebid bids to return",new Date-(P.getTime()||P.getFuseDob())),f.pbjs.setTargetingForGPTAsync([t]),$(t)}})}):K(function(){$(i)}))};ve.responsive&&D.watchForBreakpoints(function(e){e&&Ae()});var we=function(t,e){ke[t.code]&&clearInterval(ke[t.code]),ke[t.code]=setInterval(function(){var e=D.getCurrentBreakpoint();t.element&&P.checkInView(t.element,50,P.lazyDeviceToggle(t,e))&&(!t.element.clientHeight&&t.hasCreative||De(t.code))},1e3*e)},Fe=function(e){e.attributes.refresh?(E("[LOAD]: Setting custom refresh time of ".concat(e.attributes.refresh," seconds for ").concat(e.code," at: "),new Date-P.getFuseDob()),we(e,e.attributes.refresh)):0===e.attributes.refresh?E("[LOAD]: No refresh timer set for ".concat(e.code," at: "),new Date-P.getFuseDob()):ve.refresh&&0<ve.refresh?(E("[LOAD]: Setting global refresh time of ".concat(ve.refresh," seconds for ").concat(e.code," at: "),new Date-P.getFuseDob()),we(e,ve.refresh)):E("[LOAD]: No refresh timer exists in account settings.")},Oe=function(){P.setNewTime(new Date),_e={},Se={},K(function(){f.googletag.destroySlots(),f.googletag.pubads().clearTargeting()}),P.clearFuseSkins(),Te(),be&&0<ve.headerbidding&&pbjs.adUnits&&(pbjs.adUnits.length=0),P.getFuseUnits().forEach(function(e){var t,n=e.getAttribute("data-fuse-code");if(t=n?Ee()[n]:P.matchNodeToFuseSlotObject(e)){t.code||((t=JSON.parse(JSON.stringify(t))).code="".concat(s,"-").concat(t.id,"-").concat(t.matched)),P.buildFuseSlot(t,e),t.attributes&&t.attributes.adblock&&he.buildAdBlockSlots(t,e),_e[t.code]=t,_e[t.code].element=e,Se[t.code]=e;var i=D.getCurrentBreakpoint();P.checkLazyFalsy(e,t,i)?(E("[SLOTS]: Adding lazy listener for ".concat(t.code)),pe(e,t,function(){!function(e){E("[LOAD]: Loading ".concat(e," at ").concat(new Date-(P.getTime()||P.getFuseDob())));var t=P.getFuseUnitByCode(e).getAttribute("data-fuse-code");t||k("[LOAD]: No fuseCode for fuse-slot-code of ".concat(e,", this usually means there was an error with initialisation"));var n=Ee()[t];n&&(K(function(){G(n)}),be&&0<ve.headerbidding&&be.pushToPrebidQue(function(){be.setPrebidAdUnits({code:n.code,mediaTypes:{banner:{sizes:P.getCurrentSizeMapSizes(n.id)}},bids:n.bids})}),K(function(){X(n)}),De(n.code),Fe(n))}(t.code)})):(K(function(){G(t)}),be&&0<ve.headerbidding&&be.pushToPrebidQue(function(){be.setPrebidAdUnits({code:t.code,mediaTypes:{banner:{sizes:P.getCurrentSizeMapSizes(t.id)}},bids:t.bids})}),Fe(t))}}),ve.pageTargeting.forEach(function(e){K(function(){Z(e.key,e.value)})}),K(function(){Q(),X(),Ae()})};ze.loadFuseSlots=Oe,ze.loadFuseSlotById=function(e){var t=P.getFuseUnitById(e);if(!t)return k("[SLOTS]: Could not find div with data-fuse attribute of ".concat(e));var n=JSON.parse(JSON.stringify(P.matchNodeToFuseSlotObject(t)));n&&(n.code="".concat(s,"-").concat(n.id,"-").concat(n.matched),P.buildFuseSlot(n,t),n.attributes&&n.attributes.adblock&&he.buildAdBlockSlots(n,t),_e[n.code]=n,_e[n.code].element=t,Se[n.code]=t,K(function(){G(n)}),be&&0<ve.headerbidding&&be.pushToPrebidQue(function(){be.setPrebidAdUnits({code:n.code,mediaTypes:{banner:{sizes:P.getCurrentSizeMapSizes(n.id)}},bids:n.bids})}),K(function(){X(n)}),Fe(n),De(n.code))},ze.getFuseUnits=function(){return Se},ze.getFuseSlots=Ee,ze.refreshSlots=Ae,ze.refreshSlotByCode=De,ze.getRefreshIntervals=function(){return JSON.parse(JSON.stringify(ke))},ze.getFuseSettings=function(){return JSON.parse(JSON.stringify(ye))},ze.onSlotRenderEnded=function(e){K(function(){return ne(e)})},"node"===d&&(ze.getGPTSlot=ee),ze.disableRefresh=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];e&&ke[e]?(E("[REFRESH]: Disabling refresh for ".concat(e)),clearInterval(ke[e])):(E("[REFRESH]: Disabling refresh for all units"),Te())},ze.setTargeting=function(e,t){ve.pageTargeting.push({key:e,value:t}),E("[LOAD]: Adding custom targeting for [key: ".concat(e,", value: ").concat(t,"]"))},ze.getTargeting=function(){return ve.pageTargeting},ze.que.push=function(e){if("function"==typeof e)try{e.call()}catch(e){_("Error processing command :",e.message,e.stack)}else _("Commands written into fusetag.que.push must be wrapped in a function")};var je=setInterval(function(){"complete"===b.readyState||"interactive"===b.readyState?(clearInterval(je),E("[TIME]: time in ms it took the page to load: ",new Date-P.getFuseDob()),function(){ze.loaded||(ze.loaded=!0,P.getFuseQueue().forEach(function(e){if(E("[LOAD]: executing functions pushed to Fuse Queue"),"function"==typeof e)try{e.call(),e.called=!0}catch(e){_("Error processing command :",e.message,e.stack)}else _("Commands written into fusetag.que.push must be wrapped in a function")}))}.call(),Oe.call()):E("Waiting for parent Page to finish loading. Page status is: ",b.readyState)},10);return ze});
